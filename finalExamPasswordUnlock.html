<p><strong>This final is password protected</strong>. To receive a password, complete the form below. The current password will be emailed to your <a href="https://gateway.wccnet.edu/gateway/base/index.html">WCC Student Email address</a>. After you receive the password, click the <code style="color: #0f75bc; border: 3px solid #0f75bc; font-family: 'Roboto', sans-serif; font-weight: bold;">ATTEMPT QUIZ NOW</code> button and enter the password.</p>
<ul>

    <li><strong>Finals must be completed by the apprentice requesting the final</strong>, under penalty of expulsion from the program.</li>
    <li><strong>Apprentices that attend formal classes are required to take finals with their Instructor</strong>. Do not attempt a final outside of class unless you are authorized, under penalty of expulsion from the program.</li>
    <li>Passwords are valid until midnight on the day they are requested. <strong>You may request additional passwords if you need to</strong>.</li>
</ul>
<form action="" id="passwordForm" style="border: 1px solid #ccc; padding: 1em; border-radius: .3em;">
    <h2>Request a Password</h2>
    <label for=""><strong>Enter Your WCC Email Address</strong><br>
        <input id="apprenEmail" type="text" placeholder="you@wccnet.edu">
    </label>
    <label for=""><strong>Do you attend formal classes with an instructor?</strong><br>
        <select name="" id="independentInd">
            <option disabled="disabled" selected="selected">Choose one...</option>
            <option value="0">Yes, I attend classes with an instructor.</option>
            <option value="1">No, I am not required to attend classes.</option>
        </select>
    </label><br>
    <button type="button" value="GET PASSWORD" onclick="getPasswords()">GET PASSWORD</button>
</form>
<script>
    function getPasswords() {
        var apprenEmail = document.getElementById('apprenEmail').value;
        var wccnetEdu = "@wccnet.edu";
        var independentInd = document.getElementById('independentInd').value;
        var courseName = document.getElementsByTagName("h1")[0].innerHTML.split(':');
        var newCourseName = courseName[0].split(' ').join('');
        var test = window.location.href;

        if (apprenEmail.includes(wccnetEdu) === true) {
            if (apprenEmail.length < 11) {
            alert('Enter a valid WCC Student Email Address: (you@wccnet.edu)');
            }

            else if (independentInd === "0") {
                alert("You must get a password from your instructor at your next formal class.");
            }

            else if (independentInd === "Choose one...") {
                alert("Select what type of apprentice you are in the dropdown.");
            }
            
            else {
                window.open('http://space.wccnet.edu/~cacollins/passwordPost.php' + "?=" + newCourseName + '|' + apprenEmail + '|' + independentInd + '|' + test, '_self');
            }
        }

        else {
            alert('Enter a valid WCC Student Email Address: (you@wccnet.edu)');
        }
    }
var url = window.location

if (window.location.href.indexOf('?=passwordgranted') >= 0) {
    document.getElementById('passwordForm').innerHTML = "<h2>Check your student email.</h2><p>Please check your <a href='https://gateway.wccnet.edu/gateway/base/index.html'>WCC Student Email</a> for the password request notification.</p>"
}

else {
    // 
}

</script>
